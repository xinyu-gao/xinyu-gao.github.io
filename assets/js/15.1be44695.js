(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{516:function(s,a,t){s.exports=t.p+"assets/img/image-20201221132248943.00650a8e.png"},517:function(s,a,t){s.exports=t.p+"assets/img/image-20201221013538317.3e31d805.png"},565:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"_1-下载镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像"}},[s._v("#")]),s._v(" 1. 下载镜像")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ docker pull mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-运行容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-运行容器"}},[s._v("#")]),s._v(" 2. 运行容器")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ docker run  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--name mongo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27018")]),s._v(":27017  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/mongodb/config:/data/config/ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/mongodb/db/:/data/db/ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d mongo --auth\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("strong",[s._v("解释")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("--name")]),s._v("：容器的名字。")]),s._v(" "),n("li",[n("code",[s._v("-p")]),s._v("：宿主机与容器的端口号映射。")]),s._v(" "),n("li",[n("code",[s._v("-v")]),s._v("：将主机中的两个文件挂载到容器的 "),n("code",[s._v("/data/db")]),s._v(" 和 "),n("code",[s._v("/data/config/")]),s._v(" ，作为 mongo 数据存储目录和配置文件")]),s._v(" "),n("li",[n("code",[s._v("-d")]),s._v("：守护态运行。")]),s._v(" "),n("li",[n("code",[s._v("--atuh")]),s._v("：开启验证。")])]),s._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),n("p",[s._v("mongo 曾出现过安全漏洞，容易被黑客侵入。最好不要设置为默认端口号。")])]),s._v(" "),n("h3",{attrs:{id:"_3-进入容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-进入容器"}},[s._v("#")]),s._v(" 3. 进入容器")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出镜像")]),s._v("\n$ docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\n$ docker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("container ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("或者：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it mongo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_4-新增数据库、添加账号密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-新增数据库、添加账号密码"}},[s._v("#")]),s._v(" 4. 新增数据库、添加账号密码")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接 mongo，进入 admin 数据库")]),s._v("\n$ mongo admin\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建管理用户，拥有所有权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.createUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    user: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),s._v(", \n    pwd: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),s._v(", \n    roles: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(", db: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出 mongo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以上面创建的管理员身份重新进入数据库")]),s._v("\n$ mongo -u admin -p admin\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 detection 数据库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use detection\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为该数据库创建用户名密码")]),s._v("\ndb.createUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" user: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),s._v(", pwd: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev890'")]),s._v(", roles: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readWrite"')]),s._v(", db: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"detection"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新登录验证")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use detection\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.auth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev890'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("注：权限为读写即可。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(516),alt:"image-20201221132248943"}})]),s._v(" "),n("h3",{attrs:{id:"_5-测试连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-测试连接"}},[s._v("#")]),s._v(" 5. 测试连接")]),s._v(" "),n("p",[n("img",{attrs:{src:t(517),alt:"image-20201221013538317"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);